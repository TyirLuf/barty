<!DOCTYPE html>
<html>
<head>
    <title>Agendamento</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <form action="agendamento.php" method="POST">
        <div id="step1">
            <h2>Dados do Cliente</h2>
            <label for="primeiro_nome">Primeiro Nome:</label>
            <input type="text" name="primeiro_nome" required><br><br>
            
            <label for="ultimo_nome">Último Nome:</label>
            <input type="text" name="ultimo_nome" required><br><br>
            
            <label for="email">Email:</label>
            <input type="email" name="email" required><br><br>
            
            <button type="button" onclick="nextStep('step1', 'step2')">Próximo</button>
        </div>
        
        <div id="step2" class="hidden">
            <h2>Dados do Serviço</h2>
            <label for="servico">Serviço:</label>
            <select name="servico" required>
                <option value="">Selecione um serviço</option>
                <!-- Carregar opções do banco de dados -->
            </select><br><br>
            
            <label for="data_hora">Data e Hora:</label>
            <input type="datetime-local" name="data_hora" required><br><br>
            
            <button type="button" onclick="previousStep('step2', 'step1')">Anterior</button>
            <button type="button" onclick="nextStep('step2', 'step3')">Próximo</button>
        </div>
        
        <div id="step3" class="hidden">
            <h2>Confirmação do Agendamento</h2>
            <p><strong>Dados do Cliente:</strong></p>
            <p>Primeiro Nome: <span id="confirm_primeiro_nome"></span></p>
            <p>Último Nome: <span id="confirm_ultimo_nome"></span></p>
            <p>Email: <span id="confirm_email"></span></p>
            
            <p><strong>Dados do Serviço:</strong></p>
            <p>Serviço: <span id="confirm_servico"></span></p>
            <p>Data e Hora: <span id="confirm_data_hora"></span></p>
            
            <button type="button" onclick="previousStep('step3', 'step2')">Anterior</button>
            <button type="submit">Agendar</button>
        </div>
    </form>

    <script>
        function nextStep(currentStep, nextStep) {
            document.getElementById(currentStep).classList.add('hidden');
            document.getElementById(nextStep).classList.remove('hidden');
            saveFormData(currentStep);
        }

        function previousStep(currentStep, previousStep) {
            document.getElementById(currentStep).classList.add('hidden');
            document.getElementById(previousStep).classList.remove('hidden');
        }

        function saveFormData(step) {
            if (step === 'step1') {
                localStorage.setItem('primeiro_nome', document.getElementsByName('primeiro_nome')[0].value);
                localStorage.setItem('ultimo_nome', document.getElementsByName('ultimo_nome')[0].value);
                localStorage.setItem('email', document.getElementsByName('email')[0].value);
            } else if (step === 'step2') {
                localStorage.setItem('servico', document.getElementsByName('servico')[0].value);
                localStorage.setItem('data_hora', document.getElementsByName('data_hora')[0].value);
            }
        }

        // Preencher os dados da confirmação do agendamento com os dados salvos
        document.getElementById('confirm_primeiro_nome').innerText = localStorage.getItem('primeiro_nome');
        document.getElementById('confirm_ultimo_nome').innerText = localStorage.getItem('ultimo_nome');
        document.getElementById('confirm_email').innerText = localStorage.getItem('email');
        document.getElementById('confirm_servico').innerText = localStorage.getItem('servico');
        document.getElementById('confirm_data_hora').innerText = localStorage.getItem('data_hora');
    </script>
</body>
</html>
